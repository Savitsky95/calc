<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор плану</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="allbody">
            <h1>Калькулятор виконання плану</h1>
            <label for="plan">Введіть план (грн):</label>
            <input type="number" id="plan" placeholder="План" />
            <label for="fact">Введіть факт (грн):</label>
            <input type="number" id="fact" placeholder="Факт" />
            <button onclick="calculate()" class="interactive">Розрахувати</button>
            <div class="result">
                <h3>Результати:</h3>
                <p id="result100"></p>
                <p id="result98"></p>
                <p id="result95"></p>
                <p id="daysWithToday"></p>
                <p id="daysWithoutToday"></p>
                <p id="daysWithToday98"></p>
                <p id="daysWithoutToday98"></p>
                <p id="currentPercentage"></p> <!-- Добавлен для текущего процента -->
            </div>
        </div>
    </div>
    <script>
        function safeDivide(numerator, denominator) {
            return denominator === 0 ? 0 : (numerator / denominator).toFixed(2);
        }

        function calculate() {
            const plan = parseFloat(document.getElementById('plan').value);
            const fact = parseFloat(document.getElementById('fact').value);

            if (isNaN(plan) || isNaN(fact)) {
                alert("Будь ласка, введіть коректні числа.");
                return;
            }

            const remaining100 = plan - fact;
            const remaining98 = (plan * 0.98) - fact;
            const remaining95 = (plan * 0.95) - fact;

            const today = new Date();
            const daysInMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();
            const daysLeftIncludingToday = daysInMonth - today.getDate() + 1;
            const daysLeftExcludingToday = daysInMonth - today.getDate();

            // Вычисление текущего процента выполнения плана
            const currentPercentage = plan === 0 ? 0 : ((fact / plan) * 100).toFixed(2);

            document.getElementById('result100').textContent = `Залишилось до 100%: ${remaining100.toFixed(2)} грн.`;
            document.getElementById('result98').textContent = `Залишилось до 98%: ${remaining98.toFixed(2)} грн.`;
            document.getElementById('result95').textContent = `Залишилось до 95%: ${remaining95.toFixed(2)} грн.`;

            document.getElementById('daysWithToday').textContent = `Сума на день з урахуванням сьогодняшнього дня (95%): ${safeDivide(remaining95, daysLeftIncludingToday)} грн. / (98%): ${safeDivide(remaining98, daysLeftIncludingToday)} грн.`;
            document.getElementById('daysWithoutToday').textContent = `Сума на день без урахування сьогодняшнього дня (95%): ${safeDivide(remaining95, daysLeftExcludingToday)} грн. / (98%): ${safeDivide(remaining98, daysLeftExcludingToday)} грн.`;

            // Вывод текущего процента выполнения плана
            document.getElementById('currentPercentage').textContent = `Виконання плану: ${currentPercentage}%`;
        }
    </script>
</body>
</html>
